<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>eaCtrl Frame</title>
  <style>
    html,body{margin:0;padding:0;background:transparent}
    /* Tamaño mínimo típico 300x250; el proveedor puede reescalar si procede */
    #frame-root{display:grid;place-items:center;min-width:300px;min-height:250px}
    #frame-root > div{width:300px;height:250px}
  </style>
</head>
<body>
  <div id="frame-root">
    <div id="ad-slot"></div>
  </div>
  <script>
    (function(){
      const q = new URLSearchParams(location.search);
      const space = q.get('space');       // 8182057
      const pid   = q.get('pid');         // 152716
      const ctrl  = q.get('ctrl');        // 798544
      if(!space || !pid || !ctrl){ console.warn('eaCtrl: parámetros incompletos'); return; }

      // El contenedor que espera el script de Ero: sp_<space>_node
      const display = `sp_${space}_node`;
      const slot = document.getElementById('ad-slot');
      slot.id = display;

      // Cargar nuestro loader (que a su vez llama a go.easrv.cl con esos IDs)
      const s = document.createElement('script');
      s.src = `/api/ads/eroctrl?space=${encodeURIComponent(space)}&pid=${encodeURIComponent(pid)}&ctrl=${encodeURIComponent(ctrl)}&display=${encodeURIComponent(display)}`;
      s.async = true;
      s.referrerPolicy = 'unsafe-url';
      document.body.appendChild(s);
    })();
  </script>
</body>
</html>
