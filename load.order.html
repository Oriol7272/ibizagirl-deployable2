<!-- 
    ORDEN CORRECTO DE CARGA DE SCRIPTS PARA IBIZAGIRL.PICS
    Este fragmento debe incluirse al final del <body> en main.html
    El orden es CRÍTICO para el funcionamiento correcto
-->

<!-- ============================
     MÓDULOS DE CONTENIDO (Orden crítico)
     ============================ -->

<!-- 1. Configuración y utilidades base -->
<script src="content-data1.js"></script>

<!-- 2. Imágenes públicas (127 archivos) -->
<script src="content-data2.js"></script>

<!-- 3. Imágenes premium parte 1 (186 archivos) -->
<script src="content-data3.js"></script>

<!-- 4. Imágenes premium parte 2 (204 archivos) -->
<script src="content-data4.js"></script>

<!-- 5. Videos premium (67 archivos) -->
<script src="content-data5.js"></script>

<!-- 6. API unificada y funciones principales -->
<script src="content-data6.js"></script>

<!-- 7. Integrador con main-script.js -->
<script src="content-data-integration.js"></script>

<!-- ============================
     SCRIPTS DE FUNCIONALIDAD
     ============================ -->

<!-- 8. Gestor de contenedores de anuncios -->
<script src="ad-containers-manager.js"></script>

<!-- 9. Corrector de URLs de ExoClick -->
<script src="exoclick-urls-fix.js"></script>

<!-- 10. Script principal de la aplicación -->
<script src="main-script.js"></script>

<!-- ============================
     VERIFICACIÓN DE CARGA
     ============================ -->
<script>
// Verificar que todos los módulos se cargaron correctamente
document.addEventListener('DOMContentLoaded', function() {
    const requiredModules = [
        'ContentConfig',           // content-data1.js
        'FULL_IMAGES_POOL',       // content-data2.js
        'PREMIUM_IMAGES_PART1',   // content-data3.js
        'PREMIUM_IMAGES_PART2',   // content-data4.js
        'PREMIUM_VIDEOS_POOL',    // content-data5.js
        'ContentAPI',             // content-data6.js
        'UnifiedContentAPI',      // content-data6.js
        'IntegrationSystem'       // content-data-integration.js
    ];
    
    const missingModules = [];
    
    requiredModules.forEach(module => {
        if (!window[module]) {
            missingModules.push(module);
        }
    });
    
    if (missingModules.length > 0) {
        console.error('❌ Módulos faltantes:', missingModules);
        console.error('Por favor, verifica que todos los archivos estén presentes y el orden de carga sea correcto.');
    } else {
        console.log('✅ Todos los módulos cargados correctamente');
        
        // Mostrar estadísticas del sistema
        if (window.UnifiedContentAPI) {
            const stats = window.UnifiedContentAPI.getSystemStats();
            console.log('📊 Estadísticas del sistema:');
            console.log(`   - Fotos públicas: ${stats.photos.public}`);
            console.log(`   - Fotos premium: ${stats.photos.premium}`);
            console.log(`   - Videos: ${stats.videos.total}`);
            console.log(`   - Total de contenido: ${stats.photos.total + stats.videos.total} archivos`);
        }
        
        // Verificar funciones de integración
        if (window.getRandomContentForMainScript) {
            console.log('✅ Funciones de integración disponibles');
        }
        
        // Disparar evento de sistema listo
        window.dispatchEvent(new CustomEvent('contentSystemReady', {
            detail: {
                modules: requiredModules.filter(m => window[m]),
                stats: window.UnifiedContentAPI ? window.UnifiedContentAPI.getSystemStats() : null
            }
        }));
    }
});
</script>

<!-- ============================
     MODO DEBUG (Solo desarrollo)
     ============================ -->
<script>
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    console.log('🔧 Modo desarrollo detectado');
    
    // Comandos de debug disponibles
    console.log('📝 Comandos de debug disponibles:');
    console.log('   debugModularSystem() - Ver estado del sistema');
    console.log('   testModularContent() - Probar contenido');
    console.log('   forceReloadContent() - Recargar contenido');
    console.log('   ContentDebug.inspectCache() - Inspeccionar caché');
    console.log('   ContentDebug.testFeatures() - Probar características');
    console.log('   adDebug() - Debug de anuncios');
    
    // Auto-ejecutar diagnóstico inicial
    setTimeout(() => {
        if (window.debugModularSystem) {
            window.debugModularSystem();
        }
    }, 2000);
}
</script>
