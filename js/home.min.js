(function(){var U=window.IBG_UTIL||{},$=function(s){return document.querySelector(s)};
function rotStart(list){var b=$('.banner .img');if(!b)return;if(!list||!list.length){b.style.backgroundImage='url("decorative-images/paradise-beach.png")';b.style.opacity=.28;return}
var i=0;function rot(){b.style.opacity=0;var src=list[i%list.length];setTimeout(function(){b.style.backgroundImage='url("'+src+'")';b.style.opacity=.28},220);i++}rot();setInterval(rot,4000)}
document.addEventListener('DOMContentLoaded',function(){
fetch('decorative-images/manifest.json').then(r=>r.ok?r.json():null).then(j=>{var arr=j&&Array.isArray(j.images)?j.images:[];var list=arr.map(n=>'decorative-images/'+n);if(list.length===0)list=['decorative-images/paradise-beach.png'];rotStart(list)}).catch(()=>rotStart(['decorative-images/paradise-beach.png']));
var pub=window.CONTENT_PUBLIC||[];var c30=U.sample(pub,30).map(x=>U.norm(x,'full'));var car=$('#carousel');if(car){c30.forEach(src=>{var img=new Image();img.src=src;car.appendChild(img)})}
var used=new Set(c30);var rest=pub.filter(x=>!used.has(U.norm(x,'full')));var g40=U.sample(rest,40).map(x=>U.norm(x,'full'));var grid=$('#grid40');if(grid){g40.forEach(src=>{var d=document.createElement('div');d.className='thumb';var img=new Image();img.src=src;d.appendChild(img);grid.appendChild(d)})}
});})();
