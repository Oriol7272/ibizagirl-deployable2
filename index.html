<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IbizaGirl.pics ‚Äî Home</title>

  <!-- CSS (cache-bust) -->
  <link rel="stylesheet" href="/css/site.css?v=20250822183234">
  <link rel="stylesheet" href="/css/blur.css?v=20250822183234">

  <!-- Preconexiones √∫tiles -->
  <link rel="preconnect" href="https://ibizagirl-assets.s3.eu-north-1.amazonaws.com" crossorigin>
  <link rel="preconnect" href="https://client.crisp.chat" crossorigin>
</head>
<body>
  <header class="site-header">
    <h1>IbizaGirl.pics</h1>
    <nav class="nav">
      <a href="/" aria-current="page">Home</a>
      <a href="/premium.html">Premium</a>
      <a href="/videos.html">Videos</a>
      <a href="/subscription.html">Suscripci√≥n</a>
    </nav>
  </header>

  <main class="container">
    <h2>üì∏ Full ‚Äî 20 fotos aleatorias</h2>

    <!-- Galer√≠a -->
    <div id="gallery" class="grid grid-tiles"></div>

    <!-- Estado / diagn√≥stico simple -->
    <p id="diag" class="diag muted" style="margin-top:8px"></p>
  </main>

<!-- === ADS START === -->
<div class="ads-row" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin:16px 0;">
  <div class="ad-slot" id="ad-exo-1"></div>
  <div class="ad-slot" id="ad-juicy-1">
    <ins class="adsbyjuicy" data-adzone="2092250" style="display:inline-block;width:300px;height:262px"></ins>
  </div>
  <div class="ad-slot" id="ad-ero-1"></div>
</div>

<!-- ExoClick -->
<script async src="https://a.magsrv.com/ad-provider.js"></script>
<script>
try{ (AdProvider=window.AdProvider||[]).push({"serve":{"siteId":5696328}}); }
catch(e){ console.warn('exo err', e); }
</script>

<!-- JuicyAds -->
<script async src="https://adserver.juicyads.com/js/jads.js"></script>
<script>
try{ (window.adsbyjuicy = window.adsbyjuicy || []).push({"adzone":2092250}); }
catch(e){ console.warn('juicy err', e); }
</script>

<!-- EroAdvertising -->
<script async src="https://www.premiumvertising.com/zS/bwdvf/ttabletop.min.js"></script>
<script async src="https://www.premiumvertising.com/LmkfhR/tW/ptabletop.min.js"></script>

<!-- PopAds -->
<script type="text/javascript" data-cfasync="false">
(function(){
  var k=window,g="e494ffb82839a29122608e933394c091",
      b=[["siteId",603*110+885*526-923+4695841],["minBid",0],["popundersPerIP","0"],["delayBetween",0],["default",false],["defaultPerDay",0],["topmostLayer","auto"]],
      t=["d3d3LnByZW1pdW12ZXJ0aXNpbmcuY29tL0xta2ZoUi90Vy9wdGFibGV0b3AubWluLmpz",
         "ZDJqMDQyY2oxNDIxd2kuY2xvdWRmcm9udC5uZXQvZ21kYi5taW4uanM=",
         "d3d3Lmd5dHphYnpmbGpnY3kuY29tL1RsTUd5di9JcC9vdGFibGV0b3AubWluLmpz",
         "d3d3LmRiaHFyYWlocHltLmNvbS91bWRiLm1pbi5qcw=="],
      r=-1,e,a,x=function(){clearTimeout(a);r++;if(t[r]&&!(1781762654000<(new Date).getTime()&&1<r)){
        e=k.document.createElement("script");e.type="text/javascript";e.async=!0;
        var p=k.document.getElementsByTagName("script")[0];
        e.src="https://"+atob(t[r]);e.crossOrigin="anonymous";e.onerror=x;
        e.onload=function(){clearTimeout(a);k[g.slice(0,16)+g.slice(0,16)]||x()};
        a=setTimeout(x,5E3);p.parentNode.insertBefore(e,p)
      }};
  if(!k[g]){try{Object.freeze(k[g]=b)}catch(e){}x()}
})();
</script>
<!-- === ADS END === -->


  <footer class="site-footer">
    <small>¬© IbizaGirl.pics</small>
  </footer>

  <!-- DATA: carga en este orden -->
  <script src="/content-data1.js"></script>
  <script src="/content-data2.js"></script>
  <script src="/content-data3.js"></script>
  <script src="/content-data4.js"></script>
  <script src="/content-data5.js"></script>
  <script src="/content-data6.js"></script>

  <!-- Helpers (si existen en tu repo) -->
  <script src="/js/unified-helpers.js?v=20250822173205"></script>
  <script src="/js/payments.js?v=20250822184223"></script>
  <script src="/js/chatbot.js?v=20250822173205"></script>

  <!-- Render FULL (robusto y sin inventar nombres) -->
  <script>
  (function () {
    const $g = document.getElementById('gallery');
    const $d = document.getElementById('diag');

    function pick20FromPool() {
      // 1) Preferir API unificada si est√° disponible (ya baraja aleatorio)
      if (window.UnifiedContentAPI && typeof UnifiedContentAPI.getPublicImages === 'function') {
        try {
          const list = UnifiedContentAPI.getPublicImages(20);
          if (Array.isArray(list) && list.length) return list;
        } catch (e) { console.warn('UnifiedContentAPI.getPublicImages fall√≥:', e); }
      }

      // 2) Fallback: usar FULL_IMAGES_POOL (content-data2.js)
      const pool = Array.isArray(window.FULL_IMAGES_POOL) ? window.FULL_IMAGES_POOL.slice() : [];
      // Filtrar solo entradas v√°lidas 'full/....(webp|jpg|jpeg|png)'
      const valid = pool.filter(x => typeof x === 'string' && /^full\/[^\/]+\.(webp|jpg|jpeg|png)$/i.test(x));
      if (!valid.length) return [];

      // Mezclar y coger 20
      for (let i = valid.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [valid[i], valid[j]] = [valid[j], valid[i]];
      }
      return valid.slice(0, 20);
    }

    function render(items) {
      $g.innerHTML = '';
      const seen = new Set();

      items.forEach(src => {
        // normalizar: asegurar que empieza por 'full/'
        if (!/^full\//i.test(src)) return;
        if (seen.has(src)) return;
        seen.add(src);

        const a = document.createElement('a');
        a.href = '/' + src;                 // abrir la imagen real
        a.target = '_blank';
        a.rel = 'noopener';

        const fig = document.createElement('figure');
        fig.className = 'tile';

        const img = document.createElement('img');
        img.loading = 'lazy';
        img.decoding = 'async';
        img.alt = 'Photo';
        img.src = '/' + src;                // usar la ruta REAL que existe en Vercel (no inventar)
        img.onerror = () => {               // si 404, ocultar el tile
          fig.style.display = 'none';
        };

        fig.appendChild(img);
        a.appendChild(fig);
        $g.appendChild(a);
      });

      const totalPool = Array.isArray(window.FULL_IMAGES_POOL) ? window.FULL_IMAGES_POOL.length : 0;
      $d.textContent = `FULL en pool: ${totalPool} | Mostrando: ${seen.size}`;
      console.log('Home FULL: pool', totalPool, '| render', seen.size);
    }

    // Esperar al siguiente tick para que los content-data*.js est√©n cargados
    window.requestAnimationFrame(() => {
      const selection = pick20FromPool();
      if (!selection.length) {
        $d.textContent = '‚ö†Ô∏è No se pudo obtener el pool FULL. Revisa content-data2.js.';
        console.warn('No FULL selection');
        return;
      }
      render(selection);
    });
  })();
  </script>

  <!-- Ads: PopAds (opcional; no bloquea render si falla) -->
  <script type="text/javascript" data-cfasync="false">
  (function(){try{
    var k=window,g="e494ffb82839a29122608e933394c091",
      b=[["siteId",603*110+885*526-923+4695841],["minBid",0],["popundersPerIP","0"],["delayBetween",0],["default",false],["defaultPerDay",0],["topmostLayer","auto"]],
      t=["d3d3LnByZW1pdW12ZXJ0aXNpbmcuY29tL0xta2ZoUi90Vy9wdGFibGV0b3AubWluLmpz",
         "ZDJqMDQyY2oxNDIxd2kuY2xvdWRmcm9udC5uZXQvZ21kYi5taW4uanM=",
         "d3d3Lmd5dHphYnpmbGpnY3kuY29tL1RsTUd5di9JcC9vdGFibGV0b3AubWluLmpz",
         "d3d3LmRiaHFyYWlocHltLmNvbS91bWRiLm1pbi5qcw=="],
      r=-1,e,a,x=function(){clearTimeout(a);r++;if(t[r]&&!(1781762654000<(new Date).getTime()&&1<r)){e=k.document.createElement("script");e.type="text/javascript";e.async=!0;var p=k.document.getElementsByTagName("script")[0];e.src="https://"+atob(t[r]);e.crossOrigin="anonymous";e.onerror=x;e.onload=function(){clearTimeout(a);k[g.slice(0,16)+g.slice(0,16)]||x()};a=setTimeout(x,5E3);p.parentNode.insertBefore(e,p)}};
    if(!k[g]){try{Object.freeze(k[g]=b)}catch(e){}x()}
  }catch(_e){}})();
  </script>

  <!-- Chatbot (Crisp) si ya lo usas ‚Äî no toca al render -->
  <script defer src="/js/ads.js?v=20250822204832"></script>
</body>
</html>
