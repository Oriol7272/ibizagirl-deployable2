<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>IbizaGirl.pics â€” Home</title>
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="css/site.css?v=20250821c">
  <link rel="stylesheet" href="css/blur.css?v=20250821c">
  <!-- Crisp -->
  <script defer src="js/chatbot.js?v=20250821c"></script>
  <!-- Ads: ExoClick loader -->
  <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
</head>
<body>
  <header>
    <nav>
      <div class="brand">ðŸŒ´ IbizaGirl.pics</div>
      <a href="index.html">Home</a>
      <a href="premium.html">Uncensored</a>
      <a href="videos.html">Videos</a>
      <a href="subscription.html">Subscribe</a>
    </nav>
  </header>

  <main>
    <section class="section">
      <div class="ad-row">
        <ins class="eas6a97888e2" data-zoneid="5696328" style="display:block;width:100%;min-height:90px"></ins>
        <script>(AdProvider=window.AdProvider||[]).push({"serve":{}});</script>
      </div>
    </section>

    <section class="section">
      <h2>Gallery (20 daily random)</h2>
      <div id="gallery-grid" class="grid"></div>
    </section>

    <section class="section">
      <h2>Uncensored (100 random, 30% NEW)</h2>
      <div id="uncensored-grid" class="grid"></div>
    </section>

    <section class="section">
      <h2>Videos (20 random)</h2>
      <div id="videos-grid" class="grid"></div>
    </section>

    <footer>Â© IbizaGirl.pics</footer>
  </main>

  <!-- Icon sprite -->
  <svg width="0" height="0" style="position:absolute">
    <symbol id="icon-lock" viewBox="0 0 24 24">
      <path d="M12 2a5 5 0 0 0-5 5v3H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-1V7a5 5 0 0 0-5-5Zm0 2a3 3 0 0 1 3 3v3H9V7a3 3 0 0 1 3-3Z"/>
    </symbol>
  </svg>

  <!-- DATA modules -->
  <script src="content-data1.js"></script>
  <script src="content-data2.js"></script>
  <script src="content-data3.js"></script>
  <script src="content-data4.js"></script>
  <script src="content-data5.js"></script>
  <script src="content-data6.js"></script>

  <!-- Logic -->
  <script src="js/daily-rotator.js?v=20250821b"></script>
  <script src="js/payments.js?v=20250821b"></script>

  <script>
  // Utilidades de selecciÃ³n segura desde tus mÃ³dulos
  function pickAPI(){
    const U = window.UnifiedContentAPI || {};
    const C = window.ContentAPI || {};
    return {
      full:        (U.getFull?.() || C.getFull?.() || U.full || C.full || window.FULL_IMAGES || []),
      premiumPics: (U.getPremiumPhotos?.() || C.getPremiumPhotos?.() || U.premiumPhotos || C.premiumPhotos || window.PREMIUM_PHOTOS || []),
      videos:      (U.getPremiumVideos?.() || C.getPremiumVideos?.() || U.premiumVideos || C.premiumVideos || window.PREMIUM_VIDEOS || [])
    };
  }

  function seededRandom(count, seed){
    let a = seed>>>0; const out=[];
    function rnd(){ a+=0x6D2B79F5; let t=Math.imul(a^(a>>>15),1|a); t^=t+Math.imul(t^(t>>>7),61|t); return ((t^(t>>>14))>>>0)/4294967296; }
    for(let i=0;i<count;i++) out.push(rnd());
    return ()=> rnd();
  }
  function todaySeed(){
    const d=new Date(); const k=`${d.getUTCFullYear()}-${d.getUTCMonth()+1}-${d.getUTCDate()}`; let s=0; for(const ch of k) s=(s*31+ch.charCodeAt(0))>>>0; return s;
  }
  function shuffleTake(arr, n, seed){
    const a=arr.slice(0); const rnd=seededRandom(a.length,seed);
    for(let i=a.length-1;i>0;i--){ const j=Math.floor(rnd()* (i+1)); [a[i],a[j]]=[a[j],a[i]]; }
    return a.slice(0, n);
  }

  function cardImage(item, {censored=false, price="â‚¬0.10"}={}){
    const img = document.createElement('img');
    img.loading='lazy'; img.decoding='async';
    img.src = item.src || item.url || item.image || item; // flexible
    img.alt = item.alt || 'photo';
    img.className = 'thumb' + (censored ? ' censored' : '');
    const wrap = document.createElement('div'); wrap.className='card thumb-wrap';
    wrap.appendChild(img);
    const meta = document.createElement('div'); meta.className='meta';
    meta.textContent = item.title || item.caption || '';
    wrap.appendChild(meta);
    if (item.isNew){
      const b = document.createElement('div'); b.className='badge badge-new'; b.textContent='NEW';
      wrap.appendChild(b);
    }
    if (censored){
      const btn = document.createElement('button'); btn.className='unlock-btn';
      btn.innerHTML = `<svg class="i"><use href="#icon-lock"></use></svg><span class="price">${price}</span>`;
      btn.addEventListener('click', ()=> window.IBG_PAY?.buyItem?.({src: img.src, amount: 0.10, currency:'EUR'}));
      wrap.appendChild(btn);
    }
    return wrap;
  }

  function cardVideo(item, {price="â‚¬0.30"}={}){
    const v = document.createElement('video');
    v.playsInline = true; v.muted=true; v.controls=false; v.loop=true;
    v.poster = item.poster || 'img/video-poster-blur.svg';
    v.className='thumb censored';
    const src = document.createElement('source');
    src.src = item.src || item.url || item; src.type = 'video/mp4';
    v.appendChild(src);
    const wrap = document.createElement('div'); wrap.className='card thumb-wrap';
    wrap.appendChild(v);
    const meta = document.createElement('div'); meta.className='meta';
    meta.textContent = item.title || 'video';
    wrap.appendChild(meta);
    const btn = document.createElement('button'); btn.className='unlock-btn';
    btn.innerHTML = `<svg class="i"><use href="#icon-lock"></use></svg><span class="price">${price}</span>`;
    btn.addEventListener('click', ()=> window.IBG_PAY?.buyItem?.({src: src.src, amount: 0.30, currency:'EUR', kind:'video'}));
    wrap.appendChild(btn);
    return wrap;
  }

  (function render(){
    const API = pickAPI();
    const seed = todaySeed();

    // 20 gallery (full)
    const gallery = shuffleTake(API.full, 20, seed);
    const gEl = document.getElementById('gallery-grid');
    gallery.forEach(item => gEl.appendChild(cardImage(item, {censored:false})));

    // 100 uncensored (blur + 30% new)
    const unc = shuffleTake(API.premiumPics, 100, seed ^ 0x9e3779);
    const markNewCount = Math.floor(unc.length * 0.3);
    for(let i=0;i<markNewCount;i++) if (unc[i]) unc[i].isNew = true;
    const uEl = document.getElementById('uncensored-grid');
    unc.forEach(item => uEl.appendChild(cardImage(item, {censored:true, price:'â‚¬0.10'})));

    // 20 videos
    const vids = shuffleTake(API.videos, 20, seed ^ 0xC001C0DE);
    const vEl = document.getElementById('videos-grid');
    vids.forEach(item => vEl.appendChild(cardVideo(item, {price:'â‚¬0.30'})));
  })();
  </script>
</body>
</html>
