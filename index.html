<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IbizaGirl.pics — Home</title>
  <link rel="preload" href="/css/site.css?v=20250822134709" as="style">
  <link rel="stylesheet" href="/css/site.css?v=20250822134709">
  <link rel="stylesheet" href="/css/blur.css?v=20250822134709">
</head>
<body>
  <header class="topbar">
    <div class="brand">IbizaGirl.pics</div>
    <nav class="nav">
      <a href="/premium.html">Premium</a>
      <a href="/videos.html">Videos</a>
      <a href="/subscription.html">Suscripción</a>
    </nav>
  </header>

  <main class="container">
    <h2>Galería (20 aleatorias de FULL)</h2>
    <div id="grid" class="grid"></div>
    <footer class="footer">© IbizaGirl.pics</footer>
  </main>

  <!-- Tus datasets (no tocar el orden) -->
  <script src="/content-data1.js"></script>
  <script src="/content-data2.js"></script> <!-- FULL -->
  <script src="/content-data3.js"></script> <!-- premium 1 -->
  <script src="/content-data4.js"></script> <!-- premium 2 -->
  <script src="/content-data5.js"></script> <!-- videos -->
  <script src="/content-data6.js"></script> <!-- unified API -->

  <script>
  // Home FULL: pinta 20 al azar directamente desde /full/… sin CDN ni validaciones
  (function(){
    const MAX = 20;
    const grid = document.getElementById('grid');

    // Espera hasta que los pools estén listos (los expone unified-helpers/content-data6)
    function waitForFullPool(timeoutMs=6000){
      return new Promise(resolve=>{
        const t0 = Date.now();
        const iv = setInterval(()=>{
          // Intenta varias convenciones: IBG.pools, window.pools, window.POOLS…
          const pools = (window.IBG && IBG.pools) || window.pools || window.POOLS || {};
          const full = pools.full || pools.FULL || [];
          if (Array.isArray(full) && full.length) { clearInterval(iv); resolve(full); }
          if (Date.now() - t0 > timeoutMs) { clearInterval(iv); resolve([]); }
        }, 60);
      });
    }

    function shufflePick(arr, n){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
      return a.slice(0, n);
    }

    function resolveFullSrc(item){
      // item puede ser string o objeto (según cómo lo construyan los content-data*)
      let name = (typeof item === 'string') ? item : (item.file || item.name || item.src || '');
      if (!name) return '/img/placeholder.webp';
      name = String(name).replace(/^\.?\/*/, '').replace(/^full\//, '');
      return '/full/' + name;
    }

    function renderCards(list){
      const html = list.map(it=>{
        const src = resolveFullSrc(it);
        return `
          <a class="card" href="${src}" target="_blank" rel="noopener">
            <img loading="lazy" decoding="async" src="${src}"
                 onerror="this.closest('a').style.display='none'">
          </a>`;
      }).join('');
      grid.innerHTML = html || '<p style="opacity:.7">No se han encontrado imágenes FULL.</p>';
    }

    waitForFullPool().then(fullPool=>{
      console.log('⚑ Home: FULL en pool =', fullPool.length);
      const pick = shufflePick(fullPool, MAX);
      renderCards(pick);
    });
  })();
  </script>

  <!-- PopAds (completo) -->
  <script type="text/javascript" data-cfasync="false">
  (function(){
    var k=window,g="e494ffb82839a29122608e933394c091",
      b=[["siteId",603*110+885*526-923+4695841],["minBid",0],["popundersPerIP","0"],["delayBetween",0],["default",false],["defaultPerDay",0],["topmostLayer","auto"]],
      t=["d3d3LnByZW1pdW12ZXJ0aXNpbmcuY29tL0xta2ZoUi90Vy9wdGFibGV0b3AubWluLmpz",
         "ZDJqMDQyY2oxNDIxd2kuY2xvdWRmcm9udC5uZXQvZ21kYi5taW4uanM=",
         "d3d3Lmd5dHphYnpmbGpnY3kuY29tL1RsTUd5di9JcC9vdGFibGV0b3AubWluLmpz",
         "d3d3LmRiaHFyYWlocHltLmNvbS91bWRiLm1pbi5qcw=="],
      r=-1,e,a,x=function(){
        clearTimeout(a);r++;
        if(t[r]&&!(1781762654000<(new Date).getTime()&&1<r)){
          e=k.document.createElement("script");e.type="text/javascript";e.async=!0;
          var p=k.document.getElementsByTagName("script")[0];
          e.src="https://"+atob(t[r]);e.crossOrigin="anonymous";
          e.onerror=x;
          e.onload=function(){clearTimeout(a);k[g.slice(0,16)+g.slice(0,16)]||x()};
          a=setTimeout(x,5E3);p.parentNode.insertBefore(e,p)
        }
      };
    if(!k[g]){try{Object.freeze(k[g]=b)}catch(e){}x()}
  })();
  </script>
</body>
</html>
