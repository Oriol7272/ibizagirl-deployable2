<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>IbizaGirl â€” Videos</title>

  <link rel="stylesheet" href="/css/site.css?v=20250822183234">
  <link rel="stylesheet" href="/css/blur.css?v=20250822183234">
  <style>
    .grid-tiles{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
    .tile{position:relative;border-radius:10px;overflow:hidden;background:#111}
    .tile video{width:100%;height:180px;object-fit:cover;background:#000}
    .over{position:absolute;inset:auto 8px 8px 8px;display:flex;justify-content:space-between;align-items:center}
    .badge{background:#222;color:#eee;border:1px solid #444;font-size:11px;padding:3px 6px;border-radius:999px}
    .pp-btn{border:none;background:#ffc439;border-radius:6px;font-size:10px;padding:3px 6px;cursor:pointer}
  </style>
</head>
<body>
<header class="site-header">
  <h1>Videos</h1>
  <nav class="nav">
    <a href="/">Home</a>
    <a href="/premium.html">Premium</a>
    <a href="/videos.html" aria-current="page">Videos</a>
    <a href="/subscription.html">SuscripciÃ³n</a>
  </nav>
</header>

<main class="container">
  <section class="packs">
    <h2>Packs</h2>
    <div class="pack-grid">
      <div class="pack" data-paypal="single" data-product="Pack 10 fotos" data-price="0.80"><h3>Pack 10 fotos</h3><p class="price">0,80 â‚¬</p><div class="paypal-button"></div></div>
      <div class="pack" data-paypal="single" data-product="Pack 5 vÃ­deos" data-price="1.00"><h3>Pack 5 vÃ­deos</h3><p class="price">1,00 â‚¬</p><div class="paypal-button"></div></div>
    </div>
  </section>
  <h2>ðŸŽ¬ 20 videos premium</h2>
  <div id="grid" class="grid-tiles"></div>
  <p id="diag" class="muted"></p>
</main>

<footer class="site-footer"><small>Â© IbizaGirl.pics</small></footer>

<!-- DATA -->
<script src="/content-data1.js"></script>
<script src="/content-data2.js"></script>
<script src="/content-data3.js"></script>
<script src="/content-data4.js"></script>
<script src="/content-data5.js"></script>
<script src="/content-data6.js"></script>

<!-- Helpers -->
<script src="/js/payments.js?v=20250822183234"></script>
<script src="/js/ads-safe.js?v=20250822174925"></script>

<script>
(function(){
  const $g=document.getElementById('grid');
  const $d=document.getElementById('diag');

  const VID_EXT = /\.(mp4|webm)$/i;
  const FALLBACK_POSTER = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMzIwJyBoZWlnaHQ9JDE4MCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cmVjdCBmaWxsPScjMTExJyB3aWR0aD0nMTAwJScgaGVpZ2h0PScxMDAlJy8+PHBvbHlnb24gZmlsbD0nI2ZmZicgcG9pbnRzPScxMTAsOTAgMTk1LDEzMCAxOTUsNTAnLz48L3N2Zz4=';

  function collectVideosPool(){
    // 1) unified
    if (window.UnifiedContentAPI && typeof UnifiedContentAPI.getPremiumVideos === 'function'){
      try{
        const all = UnifiedContentAPI.getPremiumVideos();
        if (Array.isArray(all) && all.length) return all;
      }catch(e){}
    }
    // 2) barrido por prefijo
    const out=new Set();
    for (const k in window){
      try{
        const v=window[k];
        if (Array.isArray(v)){
          v.forEach(s=>{
            if (typeof s==='string' && s.startsWith('uncensored-videos/') && VID_EXT.test(s)) out.add(s);
          });
        }
      }catch(_){}
    }
    return Array.from(out);
  }

  function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a;}

  function guessPoster(src){
    const base = src.replace(VID_EXT,'');
    const candidates = [
      '/'+base+'.webp',
      '/'+base+'.jpg',
      '/'+base+'.jpeg',
      '/'+base+'.png'
    ];
    return candidates[0]; // si 404, el navegador ignora el poster; quedarÃ¡ negro (ok)
  }

  function render(list){
    $g.innerHTML='';
    let shown=0;
    list.forEach(src=>{
      const fig=document.createElement('figure');fig.className='tile';
      const vid=document.createElement('video');
      vid.controls=true; vid.preload='none';
      vid.poster=guessPoster(src) || FALLBACK_POSTER;
      const s=document.createElement('source');
      s.src='/'+src; s.type=src.endsWith('.webm')?'video/webm':'video/mp4';
      vid.appendChild(s);

      const over=document.createElement('div');over.className='over';
      const price=document.createElement('span');price.className='badge';price.textContent='â‚¬14.99';
      const btn=document.createElement('button');btn.className='pp-btn';btn.textContent='PayPal';
      btn.addEventListener('click',(ev)=>{ev.preventDefault(); window.IBG_Pay && window.IBG_Pay.open('monthly','Premium Video');});
      over.appendChild(price);over.appendChild(btn);

      fig.appendChild(vid);fig.appendChild(over);
      $g.appendChild(fig);
      shown++;
    });
    $d.textContent=`VIDEOS total pool: ${window.__VID_TOTAL__||list.length} | Mostrando: ${shown}`;
  }

  const pool = collectVideosPool();
  window.__VID_TOTAL__ = pool.length;
  const selection = shuffle(pool.slice()).slice(0,20);
  render(selection);

  window.IBG_ADS && window.IBG_ADS.loadAll();
})();
</script>
</body>
</html>
