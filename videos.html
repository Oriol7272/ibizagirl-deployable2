<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Vídeos — IbizaGirl.pics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preload" as="style" href="css/site.css?v=20250822221228">
  <link rel="stylesheet" href="css/site.css?v=20250822221228">
  <script src="content-data1.js"></script>
  <script src="content-data6.js"></script>
  <script src="js/pp-config.js?v=1755894250"></script>
<script src="js/payments.js?v=20250822221228" defer></script>
</head>
<body class="dark">
<header class="topbar">
  <nav class="nav">
    <a href="/">Home</a>
    <a href="/premium.html">Premium</a>
    <a class="active" href="/videos.html">Videos</a>
    <a href="/subscription.html">Suscripción</a>
  </nav>
</header>

<main class="container">
  <h1>Videos</h1>
  <section id="grid" class="grid grid-videos"></section>
</main>

<script>
(function(){
  const PRICE_VIDEO = 0.30; // €
  const MAX = 20;

  function cardTpl(item){
    const thumb = item.thumb || 'img/placeholder-video.webp';
    const id = (item.id || item.file || Math.random().toString(36).slice(2));
    return `
      <article class="card video" data-id="${id}">
        <div class="thumb">
          <img loading="lazy" src="${thumb}" alt="video">
        </div>
        <div class="meta">
          <span class="title">Vídeo</span>
          <span class="pill price">0,30 €</span>
        </div>
        <div class="actions">
          <a class="btn link" href="${item.url || item.src || '#'}" target="_blank" rel="noopener">Play</a>
          <div class="mini-pay" data-type="video" data-id="${id}"></div>
        </div>
      </article>`;
  }

  async function render(){
    try{
      // Usa tu UnifiedContentAPI ya inicializada por content-data6.js
      const pool = (window.UnifiedContentAPI && window.UnifiedContentAPI.videos && window.UnifiedContentAPI.videos.all())
        || [];
      const chosen = pool.slice(0, MAX);
      const html = chosen.map(cardTpl).join('');
      document.getElementById('grid').innerHTML = html;

      // Render mini botones PayPal en todos los .mini-pay
      await Payments.renderMiniBuyButton({
        selector: '.mini-pay',
        priceEUR: PRICE_VIDEO,
        label: 'Vídeo',
        meta: { type:'video' }
      });
    }catch(e){
      console.error('videos render error', e);
    }
  }

  document.addEventListener('DOMContentLoaded', render);
})();
</script>

</body>
</html>
