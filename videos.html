<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>IbizaGirl.pics — Vídeos</title>
  <link rel="stylesheet" href="/css/site.css"/>
  <style>
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:#111;border-radius:14px;padding:8px;box-shadow:0 0 0 1px #222}
    video{width:100%;height:180px;border-radius:10px;background:#000}
    .muted{opacity:.65}
    .topnav{display:flex;gap:16px;margin:12px 0}
    .topnav a{color:#86b7ff;text-decoration:none}
    .price{font-size:12px;opacity:.8;margin-top:6px}
  </style>
  <script>
    (function robustLoader(){
      const ver = Date.now();
      function add(a,b){const s=document.createElement('script');s.defer=true;s.src=a+'?v='+ver;s.onerror=()=>{const f=document.createElement('script');f.defer=true;f.src=b+'?v='+ver;document.head.appendChild(f)};document.head.appendChild(s);}
      add('/content-data1.js','/js/content-data1.js');
      add('/content-data2.js','/js/content-data2.js');
      add('/content-data3.js','/js/content-data3.js');
      add('/content-data4.js','/js/content-data4.js');
      add('/content-data5.js','/js/content-data5.js'); // vídeos
      add('/content-data6.js','/js/content-data6.js');
    })();
  </script>
</head>
<body>
  <div class="topnav">
    <a href="/">Home</a>
    <a href="/premium">Premium</a>
    <a href="/videos">Vídeos</a>
    <a href="/subscription">Suscripción</a>
  </div>

  <h1>Vídeos (20 aleatorios)</h1>
  <div id="grid" class="grid"></div>
  <p id="status" class="muted"></p>

  <script>
    function dailyShuffle(arr){
      const seedStr=new Date().toISOString().slice(0,10);
      let s=0;for(let i=0;i<seedStr.length;i++)s=(s*31+seedStr.charCodeAt(i))>>>0;
      const a=arr.slice();for(let i=a.length-1;i>0;i--){s=(s*1664525+1013904223)>>>0;const j=s%(i+1);[a[i],a[j]]=[a[j],a[i]]}return a;
    }
    function norm(p){if(!p)return'';if(p.startsWith('/'))return p;return p.startsWith('uncensored-videos/')?'/'+p:'/uncensored-videos/'+p;}
    (function boot(){
      const triesMax=60;let t=0;
      const iv=setInterval(()=>{
        const pool = window.PREMIUM_VIDEOS_POOL || [];
        if (pool.length){ clearInterval(iv); render(pool); }
        else if(++t>=triesMax){
          clearInterval(iv);
          document.getElementById('status').textContent='No hay vídeos disponibles.';
          console.log('Videos: pool = 0 | render = 0');
        }
      },100);
    })();

    function render(pool){
      const pick=dailyShuffle(pool).slice(0,20);
      const grid=document.getElementById('grid');
      pick.forEach(item=>{
        const path=typeof item==='string'?item:(item.path||item.src||item.url||'');
        const src=norm(path);
        const v=document.createElement('video'); v.controls=true; v.preload='metadata'; v.src=src;
        const card=document.createElement('div'); card.className='card';
        const price=document.createElement('div'); price.className='price'; price.textContent='0,30 €';
        card.appendChild(v); card.appendChild(price); grid.appendChild(card);
      });
      document.getElementById('status').textContent=`Render ${pick.length} / pool ${pool.length}`;
    }
  </script>
<!-- PAYMENTS-INJECT VIDEOS BEGIN -->
<script src="/js/payments.config.js?v=20250823084148"></script>
<script src="/js/payments.js?v=20250823084148"></script>
<script>(function(){
  document.addEventListener(}OMContentLoaded',function(){
    var cards = document.querySelectorAll('.card,.video-card,[data-video],[data-item-id]');
    cards.forEach(function(c){
      if(!c.querySelector('.mini-buy')){var d=document.createElement(}iv');d.className='mini-buy';c.appendChild(d);}
    });
    try{Payments.renderMiniBuy({selector:'.mini-buy',price:0.30,description:|ompra vídeo IbizaGirl'});}catch(e){console.warn(e)}
  });
})();</script>
<!-- PAYMENTS-INJECT VIDEOS END -->
  <div id="mini-buy-test" style="margin:24px 0"></div>
  <script src="/js/payments.config.js?v=live3"></script>
  <script src="/js/payments.js?v=live3"></script>
  <script>document.addEventListener(}OMContentLoaded',function(){Payments.renderMiniBuyButton({selector:'#mini-buy-test', price:0.30, description:|ompra ru00e1pida de prueba'});});</script>
</body>
  <script src="/js/payments.config.js?v=live"></script>
  <script src="/js/payments.js?v=live"></script>
  <script src="/js/init-videos.js?v=live"></script>
