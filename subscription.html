<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription - IbizaGirl.pics</title>
    
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AfQEdiielw5fm3wF08p9pcxwqR3gPz82YRNUTKY4A8WNG9AktiGsDNyr2i7BsjVzSwwpeCwR7Tt7DPq5&currency=EUR&vault=true&intent=subscription"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .header {
            background: rgba(0,0,0,0.3);
            padding: 20px 0;
            text-align: center;
        }
        
        .logo { font-size: 2em; margin-bottom: 10px; }
        
        .nav {
            margin-top: 15px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            padding: 8px 15px;
            border-radius: 20px;
            background: rgba(255,255,255,0.2);
            transition: background 0.3s;
        }
        
        .nav a:hover { background: rgba(255,255,255,0.3); }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .subscription-info {
            text-align: center;
            margin: 30px 0;
        }
        
        .plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .plan-card {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            position: relative;
            transition: transform 0.3s;
        }
        
        .plan-card:hover { transform: translateY(-10px); }
        
        .plan-card.recommended {
            border: 3px solid #ff4757;
            background: rgba(255,71,87,0.2);
        }
        
        .recommended-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff4757;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .plan-title {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .plan-price {
            font-size: 3em;
            font-weight: bold;
            color: #ff4757;
            margin: 20px 0;
        }
        
        .plan-period {
            font-size: 1.2em;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        
        .features {
            list-style: none;
            margin: 30px 0;
        }
        
        .features li {
            padding: 8px 0;
            font-size: 1.1em;
        }
        
        .features li:before {
            content: "‚úì ";
            color: #00d4aa;
            font-weight: bold;
        }
        
        .subscribe-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            width: 100%;
            margin-top: 20px;
            transition: background 0.3s;
        }
        
        .subscribe-btn:hover { background: #ff3742; }
        
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
        }
        
        .language-selector select {
            padding: 8px;
            border-radius: 5px;
            border: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            color: black;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        
        .close-btn {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }
        
        #paypal-button-container {
            margin-top: 20px;
        }
        
        .status {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .status.active {
            background: rgba(0,212,170,0.2);
            border: 2px solid #00d4aa;
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <select id="languageSelect">
            <option value="es">Espa√±ol</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="fr">Fran√ßais</option>
        </select>
    </div>

    <div class="header">
        <div class="logo">üå¥ IbizaGirl.pics üå¥</div>
        <div class="nav">
            <a href="/">Home</a>
            <a href="/gallery.html">Gallery</a>
            <a href="/premium.html">Premium</a>
            <a href="/videos.html">Videos</a>
            <a href="/subscription.html">Subscribe</a>
        </div>
    </div>

    <div class="container">
        <!-- Subscription Status -->
        <div class="status" id="subscriptionStatus">
            <h3 id="statusTitle">Subscription Status</h3>
            <p id="statusText">No active subscription</p>
        </div>

        <div class="subscription-info">
            <h1 id="subscriptionTitle">‚≠ê Premium Subscription</h1>
            <p id="subscriptionDesc">Get unlimited access to all premium content</p>
        </div>

        <div class="plans">
            <!-- Monthly Plan -->
            <div class="plan-card">
                <div class="plan-title" id="monthlyTitle">Monthly Plan</div>
                <div class="plan-price">‚Ç¨19.99</div>
                <div class="plan-period" id="monthlyPeriod">per month</div>
                <ul class="features">
                    <li id="feature1">Unlimited premium photos</li>
                    <li id="feature2">Unlimited premium videos</li>
                    <li id="feature3">Daily new content</li>
                    <li id="feature4">HD quality</li>
                    <li id="feature5">Mobile optimized</li>
                </ul>
                <button class="subscribe-btn" onclick="openPaymentModal('monthly')" id="monthlyBtn">Subscribe Monthly</button>
            </div>

            <!-- Annual Plan -->
            <div class="plan-card">
                <div class="plan-title" id="annualTitle">Annual Plan</div>
                <div class="plan-price">‚Ç¨100</div>
                <div class="plan-period" id="annualPeriod">per year</div>
                <ul class="features">
                    <li id="featureA1">Unlimited premium photos</li>
                    <li id="featureA2">Unlimited premium videos</li>
                    <li id="featureA3">Daily new content</li>
                    <li id="featureA4">HD quality</li>
                    <li id="featureA5">Mobile optimized</li>
                    <li id="featureA6">Save 58% vs monthly</li>
                </ul>
                <button class="subscribe-btn" onclick="openPaymentModal('yearly')" id="annualBtn">Subscribe Annually</button>
            </div>

            <!-- Lifetime Plan -->
            <div class="plan-card recommended">
                <div class="recommended-badge" id="recommendedBadge">Best Value</div>
                <div class="plan-title" id="lifetimeTitle">Lifetime Plan</div>
                <div class="plan-price">‚Ç¨200</div>
                <div class="plan-period" id="lifetimePeriod">one time</div>
                <ul class="features">
                    <li id="featureL1">Unlimited premium photos</li>
                    <li id="featureL2">Unlimited premium videos</li>
                    <li id="featureL3">All future content</li>
                    <li id="featureL4">HD quality</li>
                    <li id="featureL5">Mobile optimized</li>
                    <li id="featureL6">Exclusive content</li>
                </ul>
                <button class="subscribe-btn" onclick="openPaymentModal('lifetime')" id="lifetimeBtn">Get Lifetime Access</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">Complete Subscription</h3>
            <p id="modalDesc">Choose your subscription plan</p>
            <div id="paypal-button-container"></div>
        </div>
    </div>

    <script>
        const translations = {
            es: {
                subscriptionTitle: "‚≠ê Suscripci√≥n Premium",
                subscriptionDesc: "Obt√©n acceso ilimitado a todo el contenido premium",
                statusTitle: "Estado de Suscripci√≥n",
                statusActive: "Suscripci√≥n Activa",
                statusInactive: "Sin suscripci√≥n activa",
                monthlyTitle: "Plan Mensual",
                monthlyPeriod: "por mes",
                monthlyBtn: "Suscripci√≥n Mensual",
                annualTitle: "Plan Anual",
                annualPeriod: "por a√±o",
                annualBtn: "Suscripci√≥n Anual",
                lifetimeTitle: "Plan Vitalicio",
                lifetimePeriod: "pago √∫nico",
                lifetimeBtn: "Obtener Acceso Vitalicio",
                recommendedBadge: "Mejor Valor",
                feature1: "Fotos premium ilimitadas",
                feature2: "Videos premium ilimitados",
                feature3: "Contenido nuevo diario",
                feature4: "Calidad HD",
                feature5: "Optimizado para m√≥vil",
                featureA6: "Ahorra 58% vs mensual",
                featureL6: "Contenido exclusivo",
                modalTitle: "Completar Suscripci√≥n",
                modalDesc: "Elige tu plan de suscripci√≥n"
            },
            en: {
                subscriptionTitle: "‚≠ê Premium Subscription",
                subscriptionDesc: "Get unlimited access to all premium content",
                statusTitle: "Subscription Status",
                statusActive: "Active Subscription",
                statusInactive: "No active subscription",
                monthlyTitle: "Monthly Plan",
                monthlyPeriod: "per month",
                monthlyBtn: "Subscribe Monthly",
                annualTitle: "Annual Plan",
                annualPeriod: "per year",
                annualBtn: "Subscribe Annually",
                lifetimeTitle: "Lifetime Plan",
                lifetimePeriod: "one time",
                lifetimeBtn: "Get Lifetime Access",
                recommendedBadge: "Best Value",
                feature1: "Unlimited premium photos",
                feature2: "Unlimited premium videos",
                feature3: "Daily new content",
                feature4: "HD quality",
                feature5: "Mobile optimized",
                featureA6: "Save 58% vs monthly",
                featureL6: "Exclusive content",
                modalTitle: "Complete Subscription",
                modalDesc: "Choose your subscription plan"
            }
        };

        let currentLanguage = 'es';
        let selectedPlan = null;
        let subscription = JSON.parse(localStorage.getItem('subscription') || 'null');

        function changeLanguage() {
            currentLanguage = document.getElementById('languageSelect').value;
            const t = translations[currentLanguage] || translations.en;
            
            document.getElementById('subscriptionTitle').textContent = t.subscriptionTitle;
            document.getElementById('subscriptionDesc').textContent = t.subscriptionDesc;
            document.getElementById('statusTitle').textContent = t.statusTitle;
            document.getElementById('monthlyTitle').textContent = t.monthlyTitle;
            document.getElementById('monthlyPeriod').textContent = t.monthlyPeriod;
            document.getElementById('monthlyBtn').textContent = t.monthlyBtn;
            document.getElementById('lifetimeTitle').textContent = t.lifetimeTitle;
            document.getElementById('lifetimePeriod').textContent = t.lifetimePeriod;
            document.getElementById('lifetimeBtn').textContent = t.lifetimeBtn;
            document.getElementById('recommendedBadge').textContent = t.recommendedBadge;
            
            // Features
            document.getElementById('feature1').textContent = t.feature1;
            document.getElementById('feature2').textContent = t.feature2;
            document.getElementById('feature3').textContent = t.feature3;
            document.getElementById('feature4').textContent = t.feature4;
            document.getElementById('feature5').textContent = t.feature5;
            document.getElementById('featureL1').textContent = t.feature1;
            document.getElementById('featureL2').textContent = t.feature2;
            document.getElementById('featureL3').textContent = t.feature3;
            document.getElementById('featureL4').textContent = t.feature4;
            document.getElementById('featureL5').textContent = t.feature5;
            document.getElementById('featureL6').textContent = t.featureL6;
            
            document.getElementById('modalTitle').textContent = t.modalTitle;
            document.getElementById('modalDesc').textContent = t.modalDesc;
            
            updateSubscriptionStatus();
            localStorage.setItem('preferred-language', currentLanguage);
        }

        function updateSubscriptionStatus() {
            const statusElement = document.getElementById('subscriptionStatus');
            const statusTextElement = document.getElementById('statusText');
            const t = translations[currentLanguage] || translations.en;
            
            if (subscription && (subscription.type === 'lifetime' || subscription.active)) {
                statusElement.classList.add('active');
                statusTextElement.textContent = t.statusActive;
            } else {
                statusElement.classList.remove('active');
                statusTextElement.textContent = t.statusInactive;
            }
        }

        function openPaymentModal(plan) {
            selectedPlan = plan;
            document.getElementById('paymentModal').style.display = 'flex';
            initPayPal();
        }

        function closeModal() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        function initPayPal() {
            document.getElementById('paypal-button-container').innerHTML = '';
            
            let amount, description;
            
            switch (selectedPlan) {
                case 'monthly':
                    amount = '19.99';
                    description = 'Monthly Premium Subscription';
                    break;
                case 'yearly':
                    amount = '100.00';
                    description = 'Annual Premium Subscription';
                    break;
                case 'lifetime':
                    amount = '200.00';
                    description = 'Lifetime Premium Access';
                    break;
                default:
                    amount = '19.99';
                    description = 'Premium Subscription';
            }
            
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: amount
                            },
                            description: description
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        // Activate subscription
                        const newSubscription = {
                            type: selectedPlan,
                            active: true,
                            startDate: new Date().toISOString(),
                            orderId: data.orderID
                        };
                        
                        // Set expiry date for time-limited plans
                        if (selectedPlan === 'monthly') {
                            const nextMonth = new Date();
                            nextMonth.setMonth(nextMonth.getMonth() + 1);
                            newSubscription.expiryDate = nextMonth.toISOString();
                        } else if (selectedPlan === 'yearly') {
                            const nextYear = new Date();
                            nextYear.setFullYear(nextYear.getFullYear() + 1);
                            newSubscription.expiryDate = nextYear.toISOString();
                        }
                        // Lifetime has no expiry date
                        
                        subscription = newSubscription;
                        localStorage.setItem('subscription', JSON.stringify(subscription));
                        
                        // Unlock all content
                        localStorage.setItem('unlockedPhotos', JSON.stringify(['all']));
                        localStorage.setItem('unlockedVideos', JSON.stringify(['all']));
                        
                        alert('Subscription activated! You now have access to all premium content.');
                        closeModal();
                        updateSubscriptionStatus();
                    });
                },
                onError: function(err) {
                    console.error('PayPal error:', err);
                    alert('Payment failed. Please try again.');
                }
            }).render('#paypal-button-container');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('preferred-language') || 'es';
            document.getElementById('languageSelect').value = savedLang;
            changeLanguage();
            
            document.getElementById('languageSelect').addEventListener('change', changeLanguage);
            
            console.log('‚≠ê Subscription page loaded');
        });
    </script>
</body>
</html>